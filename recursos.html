<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recursos Gratuitos | Responsabilidad Creadora</title>
    
    <!-- Fuentes Google -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Montserrat:wght@400;500;700;800;900&display=swap" rel="stylesheet">

    <!-- SUPABASE LIBRARY -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- PDF.JS LIBRARY -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>

    <style>
        /* --- CORE STYLES --- */
        :root {
            --brand-blue: #0066FC;
            --brand-blue-dim: rgba(0, 102, 252, 0.1);
            --brand-yellow: #FFD230;
            --brand-yellow-glow: rgba(255, 210, 48, 0.4);
            --bg-deep: #050505;
            --bg-card: rgba(20, 20, 20, 0.7);
            --text-white: #ffffff;
            --text-gray: #b0b0b0;
            --spacing: 100px;
            --nav-height: 80px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-deep);
            color: var(--text-white);
            line-height: 1.7;
            overflow-x: hidden;
            padding-top: var(--nav-height);
        }

        /* --- BACKGROUND --- */
        .bg-mesh {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: radial-gradient(circle at 50% 0%, rgba(0, 102, 252, 0.05), transparent 40%),
                        radial-gradient(circle at 50% 100%, rgba(20, 20, 20, 1), transparent 40%);
            background-size: cover;
        }
        .bg-mesh::after {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
            pointer-events: none;
        }

        /* --- TYPOGRAPHY --- */
        h1, h2, h3, h4 { font-family: 'Montserrat', sans-serif; font-weight: 800; color: white; letter-spacing: -0.5px; }
        .uppercase { text-transform: uppercase; letter-spacing: 3px; font-size: 0.75rem; font-weight: 700; color: var(--brand-blue); display: block; margin-bottom: 15px; }
        .highlight-yellow { color: var(--brand-yellow); }
        .container { max-width: 1080px; margin: 0 auto; padding: 0 24px; position: relative; z-index: 2; }

        /* --- NAVEGACI√ìN UNIFICADA --- */
        .top-nav {
            position: fixed; top: 0; left: 0; width: 100%; height: var(--nav-height);
            background: rgba(5, 5, 5, 0.9); backdrop-filter: blur(15px); z-index: 1000;
            display: flex; align-items: center; justify-content: center;
        }
        .nav-container { width: 100%; max-width: 1080px; display: flex; justify-content: space-between; align-items: center; padding: 0 24px; }
        .nav-logo a { color: white; font-weight: 900; text-decoration: none; font-family: 'Montserrat'; font-size: 1.5rem; letter-spacing: -1px; }
        
        .nav-menu { display: flex; list-style: none; gap: 40px; }
        .nav-item { position: relative; padding: 10px 0; }
        .nav-link { 
            font-family: 'Montserrat', sans-serif; font-size: 0.85rem; font-weight: 600; 
            text-transform: uppercase; letter-spacing: 1px; color: #ddd; text-decoration: none; 
            transition: 0.3s; cursor: pointer; display: flex; align-items: center; gap: 5px;
        }
        .nav-item:hover .nav-link { color: var(--brand-blue); }
        .arrow-down { font-size: 0.6rem; transition: transform 0.3s; }
        .nav-item:hover .arrow-down { transform: rotate(180deg); }

        /* DROPDOWN MENU (DESKTOP) */
        .dropdown {
            position: absolute; top: 100%; left: 50%; transform: translateX(-50%) translateY(10px);
            background: #0a0a0a; border: 1px solid #222; min-width: 220px; list-style: none;
            padding: 10px 0; opacity: 0; visibility: hidden; transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.8);
        }
        .nav-item:hover .dropdown { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(0); }
        .dropdown li a {
            display: block; padding: 12px 25px; color: #aaa; text-decoration: none;
            font-size: 0.85rem; font-family: 'Inter', sans-serif; transition: all 0.2s; border-left: 2px solid transparent;
        }
        .dropdown li a:hover { background: rgba(0, 102, 252, 0.05); color: white; border-left-color: var(--brand-blue); }

        .living-line { position: absolute; bottom: 0; left: 0; width: 100%; height: 1px; background: #1a1a1a; overflow: hidden; }
        .living-line::after {
            content: ''; position: absolute; top: 0; left: -50%; width: 50%; height: 100%;
            background: linear-gradient(90deg, transparent, var(--brand-blue), transparent);
            filter: drop-shadow(0 0 5px var(--brand-blue)); animation: scanLight 4s infinite linear;
        }
        @keyframes scanLight { 0% { left: -50%; } 100% { left: 100%; } }
        .mobile-toggle { display: none; cursor: pointer; color: white; font-size: 1.5rem; }

        /* --- HERO --- */
        .page-hero { padding: 100px 0 60px; text-align: center; }
        .hero-title { font-size: clamp(2.5rem, 5vw, 4rem); line-height: 1.1; margin-bottom: 30px; }
        .hero-desc { font-size: 1.2rem; color: var(--text-gray); max-width: 700px; margin: 0 auto; font-weight: 300; }

        /* --- MANIFIESTO --- */
        .manifesto-box { max-width: 800px; margin: 0 auto; padding: 40px; border-left: 1px solid var(--brand-blue); background: linear-gradient(90deg, rgba(0,102,252,0.05), transparent); }
        
        /* --- EXPLICACI√ìN --- */
        .concepts-section { padding: 60px 0; }
        .concepts-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-top: 50px; }
        .concept-card {
            background: rgba(255,255,255,0.02); border: 1px solid #222; padding: 40px 30px;
            transition: all 0.3s ease; position: relative;
        }
        .concept-card:hover { transform: translateY(-5px); background: rgba(255,255,255,0.04); }
        .concept-icon { font-size: 2.5rem; margin-bottom: 20px; color: #444; }
        .concept-title { font-size: 1.2rem; color: white; margin-bottom: 10px; font-weight: 700; }
        .concept-desc { font-size: 0.9rem; color: #999; }

        /* --- BIBLIOTECA ACTIVA --- */
        .library-section { padding: var(--spacing) 0; border-top: 1px solid #1a1a1a; min-height: 600px; }
        .library-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px; 
            margin-top: 60px; 
        }

        .lib-card {
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(0, 102, 252, 0.3);
            display: flex; flex-direction: column;
            transition: all 0.4s ease;
            position: relative; overflow: hidden;
            animation: fadeIn 0.5s ease;
            height: 100%;
        }
        
        .lib-card:hover { 
            transform: translateY(-8px); 
            border-color: var(--brand-blue); 
            box-shadow: 0 15px 40px rgba(0,102,252,0.1); 
            background: rgba(0, 102, 252, 0.02);
        }

        .lib-preview {
            width: 100%; height: 200px; background: #0f0f0f; border-bottom: 1px solid #222;
            display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative;
        }
        
        .lib-preview img, .lib-preview canvas { width: 100%; height: 100%; object-fit: cover; opacity: 0.8; transition: 0.5s; }
        .lib-card:hover .lib-preview img, .lib-card:hover .lib-preview canvas { opacity: 1; transform: scale(1.03); }

        .doc-placeholder {
            width: 80px; height: 110px; background: #fff; opacity: 0.1; border-radius: 2px; position: relative;
        }
        .doc-placeholder::after {
            content: ''; position: absolute; top: 15px; left: 10px; right: 10px; height: 2px; background: #000;
            box-shadow: 0 10px 0 #000, 0 20px 0 #000, 0 30px 0 #000;
        }

        .lib-content { padding: 30px; flex-grow: 1; display: flex; flex-direction: column; }
        .lib-title { font-family: 'Montserrat'; font-size: 1.1rem; color: white; margin-bottom: 10px; font-weight: 700; line-height: 1.3; }
        .lib-desc { font-size: 0.85rem; color: #999; margin-bottom: 25px; line-height: 1.6; flex-grow: 1; }

        .btn-lib {
            display: flex; align-items: center; justify-content: center; gap: 10px;
            width: 100%; padding: 15px; background: transparent; 
            border: 1px solid var(--brand-yellow); color: var(--brand-yellow);
            font-family: 'Montserrat'; font-weight: 700; text-transform: uppercase; font-size: 0.8rem;
            cursor: pointer; transition: 0.3s; text-decoration: none;
        }
        .btn-lib:hover { background: var(--brand-yellow); color: black; }

        .loading-text { grid-column: 1 / -1; text-align: center; color: #666; font-size: 1.2rem; }

        /* --- C√ìMO USAR --- */
        .steps-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px; margin-top: 50px; text-align: center; }
        .step-item { padding: 20px; }
        .step-num { font-size: 3rem; font-weight: 900; color: #1a1a1a; line-height: 1; margin-bottom: 15px; -webkit-text-stroke: 1px #333; }
        .step-text { color: #ccc; font-size: 1rem; }

        /* --- DOBLE CAMINO --- */
        .split-cta-section { padding: 100px 0; border-top: 1px solid #1a1a1a; }
        .split-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
        .path-card { padding: 50px; border: 1px solid #222; background: #080808; transition: 0.3s; text-align: left; }
        .path-community:hover { border-color: var(--brand-blue); background: rgba(0,102,252,0.05); }
        .path-community h3 { color: var(--brand-blue); margin-bottom: 15px; font-size: 1.5rem; }
        .path-1a1:hover { border-color: var(--brand-yellow); background: rgba(255,210,48,0.05); }
        .path-1a1 h3 { color: var(--brand-yellow); margin-bottom: 15px; font-size: 1.5rem; }
        .path-desc { color: #999; margin-bottom: 30px; font-size: 1rem; }
        .path-link { font-weight: 700; text-transform: uppercase; font-size: 0.9rem; text-decoration: none; color: white; border-bottom: 1px solid #555; padding-bottom: 5px; transition: 0.3s; }
        .path-link:hover { border-bottom-color: white; letter-spacing: 1px; }

        /* --- MODAL LEAD MAGNET --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); backdrop-filter: blur(5px);
            z-index: 9999; display: none; align-items: center; justify-content: center;
            opacity: 0; transition: opacity 0.3s ease;
        }
        .modal-overlay.active { display: flex; opacity: 1; }
        .modal-box {
            background: #0a0a0a; border: 1px solid var(--brand-blue);
            padding: 40px; width: 90%; max-width: 450px;
            position: relative; box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            transform: translateY(20px); transition: transform 0.3s ease;
        }
        .modal-overlay.active .modal-box { transform: translateY(0); }
        .close-modal { position: absolute; top: 15px; right: 20px; color: #555; font-size: 1.5rem; cursor: pointer; transition: 0.3s; }
        .close-modal:hover { color: white; }
        .modal-title { font-size: 1.5rem; color: white; margin-bottom: 10px; font-family: 'Montserrat'; font-weight: 700; }
        .modal-subtitle { font-size: 0.9rem; color: #999; margin-bottom: 30px; }
        .form-group { margin-bottom: 20px; }
        .form-input { width: 100%; padding: 15px; background: #111; border: 1px solid #333; color: white; font-family: 'Inter'; font-size: 0.9rem; outline: none; transition: 0.3s; }
        .form-input:focus { border-color: var(--brand-blue); }
        .btn-submit { width: 100%; padding: 15px; background: var(--brand-yellow); color: black; font-family: 'Montserrat'; font-weight: 700; text-transform: uppercase; border: none; cursor: pointer; transition: 0.3s; letter-spacing: 1px; }
        .btn-submit:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(255, 210, 48, 0.2); }
        .legal-check { font-size: 0.75rem; color: #555; margin-top: 15px; text-align: center; }

        /* --- ANIMACIONES --- */
        .reveal { opacity: 0; transform: translateY(30px); transition: all 0.8s cubic-bezier(0.5, 0, 0, 1); }
        .reveal.active { opacity: 1; transform: translateY(0); }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }
        .hero-animate { animation: fadeInUp 1.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; animation-delay: 0.5s; }

        /* --- FOOTER --- */
        .final-section { padding-top: 80px; padding-bottom: 60px; border-top: 1px solid #111; }
        .final-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 60px; align-items: center; margin-bottom: 60px; }
        .social-title { font-size: 0.9rem; color: #ccc; margin-bottom: 20px; text-transform: uppercase; letter-spacing: 1px; }
        .social-icons-row { display: flex; gap: 15px; }
        .social-box { width: 50px; height: 50px; background: #111; border: 1px solid #333; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; color: white; text-decoration: none; }
        .social-box:hover { background: var(--brand-blue); border-color: var(--brand-blue); transform: translateY(-5px); }
        .social-box svg { width: 22px; height: 22px; fill: currentColor; }
        .footer-legal { border-top: 1px solid #1a1a1a; padding-top: 40px; text-align: center; }
        .legal-text { font-size: 0.75rem; color: #444; margin-top: 10px; }

        /* --- RESPONSIVE / M√ìVIL --- */
        @media (max-width: 900px) {
            .mobile-toggle { display: block; position: absolute; right: 24px; top: 25px; z-index: 1001; }
            .nav-container { justify-content: center; padding: 0; }
            
            /* MEN√ö M√ìVIL CORREGIDO */
            .nav-menu {
                position: fixed; top: 0; right: -100%; width: 100%; height: 100vh;
                background: #050505; flex-direction: column; align-items: center; justify-content: flex-start;
                gap: 20px; transition: right 0.4s ease; padding-top: 100px; z-index: 1000;
                overflow-y: auto;
            }
            .nav-menu.active { right: 0; }
            
            .nav-item { width: 100%; text-align: center; padding: 0; display: block; }
            .nav-link { font-size: 1.5rem; justify-content: center; width: 100%; padding: 15px 0; display: flex; }
            
            /* Dropdown M√≥vil S√≥lido */
            .dropdown {
                position: static !important; transform: none !important; opacity: 1 !important; visibility: visible !important;
                background: #111; border: none; box-shadow: none; width: 100%; display: none; padding: 0; margin-top: 15px; text-align: center;
            }
            .nav-item.active .dropdown { display: block; animation: fadeIn 0.3s; }
            .dropdown li a { color: #aaa; font-size: 1.1rem; padding: 20px; border-bottom: 1px solid rgba(255,255,255,0.05); display: block; width: 100%; }

            .hero-title { font-size: 2.5rem; }
            .split-grid, .final-grid { grid-template-columns: 1fr; gap: 40px; text-align: center; }
            .social-icons-row { justify-content: center; }
        }
    </style>
</head>
<body>

    <div class="bg-mesh"></div>

    <!-- NAVEGACI√ìN UNIFICADA -->
    <nav class="top-nav">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="index.html">RC</a>
            </div>
            
            <div class="mobile-toggle" onclick="toggleMenu()">
                &#9776;
            </div>

            <ul class="nav-menu" id="navMenu">
                <li class="nav-item" onclick="toggleDropdown(this)">
                    <span class="nav-link">RECURSOS GRATUITOS <span class="arrow-down">&#9662;</span></span>
                    <ul class="dropdown">
                        <li><a href="recursos.html">Material Descargable</a></li>
                        <li><a href="rueda.html">Test y Herramientas</a></li>
                    </ul>
                </li>
                <li class="nav-item" onclick="toggleDropdown(this)">
                    <span class="nav-link">TRABAJA CONMIGO <span class="arrow-down">&#9662;</span></span>
                    <ul class="dropdown">
                        <li><a href="1a1.html">1 a 1</a></li>
                        <li><a href="proyectos.html">Proyectos y Ponencias</a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <div class="living-line"></div>
    </nav>

    <!-- HERO -->
    <header class="container page-hero hero-animate">
        <span class="uppercase">Material Pr√°ctico</span>
        <h1 class="hero-title">CLARIDAD REAL.<br>SIN COSTE.<br><span class="highlight-yellow">SIN RELLENO.</span></h1>
        <p class="hero-desc">
            El verdadero valor no empieza cuando alguien paga, empieza cuando alguien comprende. 
            Herramientas para ordenar tu mente y asumir responsabilidad.
        </p>
    </header>

    <!-- MANIFIESTO PEQUE√ëO -->
    <section>
        <div class="container reveal">
            <div class="manifesto-box">
                <p style="color: #ccc; font-size: 1.1rem; line-height: 1.6;">
                    "No son contenidos motivacionales. Son herramientas reales, nacidas de la pr√°ctica, la neurociencia aplicada y el acompa√±amiento humano consciente."
                </p>
            </div>
        </div>
    </section>

    <!-- CONCEPTOS (EXPLICACI√ìN) -->
    <section class="concepts-section">
        <div class="container">
            <div class="text-center reveal">
                <span class="uppercase">Pilares de Trabajo</span>
                <h2>¬øQU√â ENCONTRAR√ÅS AQU√ç?</h2>
            </div>

            <div class="concepts-grid reveal">
                <div class="concept-card">
                    <div class="concept-icon">üìÑ</div>
                    <h3 class="concept-title">Reflexi√≥n y Reestructuraci√≥n</h3>
                    <p class="concept-desc">Gu√≠a pr√°ctica para identificar d√≥nde est√°s cediendo tu poder y c√≥mo recuperarlo mediante preguntas de alto impacto.</p>
                </div>
                <div class="concept-card">
                    <div class="concept-icon">üîì</div>
                    <h3 class="concept-title">Detector de Patrones</h3>
                    <p class="concept-desc">Ejercicio visual para mapear tus bucles emocionales y entender el beneficio oculto detr√°s de tu queja.</p>
                </div>
                <div class="concept-card">
                    <div class="concept-icon">‚öñÔ∏è</div>
                    <h3 class="concept-title">Protocolo de Decisi√≥n</h3>
                    <p class="concept-desc">Framework de 4 pasos para tomar decisiones desde la coherencia y no desde la urgencia o el miedo.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- BIBLIOTECA ACTIVA (DIN√ÅMICA SUPABASE) -->
    <section class="library-section">
        <div class="container">
            <div class="text-center reveal">
                <span class="uppercase highlight-yellow">Material Descargable</span>
                <h2 style="margin-bottom: 20px;">BIBLIOTECA ACTIVA</h2>
                <p style="color:#888;">Recursos listos para aplicar hoy.</p>
            </div>

            <!-- AQU√ç SE INYECTAR√ÅN LAS TARJETAS -->
            <div class="library-grid reveal" id="resources-container">
                <div class="loading-text">Cargando recursos...</div>
            </div>
        </div>
    </section>

    <!-- C√ìMO USARLOS -->
    <section style="background: #0a0a0a; border-top: 1px solid #1a1a1a; padding: 80px 0;">
        <div class="container reveal">
            <div style="text-align: center; margin-bottom: 40px;">
                <h3 style="color: white;">C√ìMO USAR ESTOS RECURSOS</h3>
                <p style="color: #888;">La claridad no sirve si no se traduce en acci√≥n.</p>
            </div>
            
            <div class="steps-grid">
                <div class="step-item">
                    <div class="step-num">01</div>
                    <p class="step-text">Elige un recurso y ded√≠cale tiempo real (sin multitarea).</p>
                </div>
                <div class="step-item">
                    <div class="step-num">02</div>
                    <p class="step-text">Observa con honestidad qu√© se mueve en ti al leerlo.</p>
                </div>
                <div class="step-item">
                    <div class="step-num">03</div>
                    <p class="step-text">Toma una decisi√≥n concreta justo despu√©s de terminar.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- DOS CAMINOS -->
    <section class="split-cta-section">
        <div class="container">
            <div class="reveal" style="text-align: center; margin-bottom: 50px;">
                <span class="uppercase">Siguientes Pasos</span>
                <h2>ESTO ES SOLO EL COMIENZO</h2>
            </div>

            <div class="split-grid reveal">
                <div class="path-card path-community">
                    <h3>LA COMUNIDAD</h3>
                    <p style="color: white; font-weight: 600; margin-bottom: 10px;">Responsabilidad Creadora</p>
                    <p class="path-desc">Un espacio vivo donde profundizamos, integramos y sostenemos el cambio. Deja de hacerlo solo.</p>
                    <a href="https://www.skool.com/responsabilidad-creadora-7552/about" target="_blank" class="path-link">UNIRME AHORA ‚Üí</a>
                </div>
                <div class="path-card path-1a1">
                    <h3>TRABAJO 1 A 1</h3>
                    <p style="color: white; font-weight: 600; margin-bottom: 10px;">Acompa√±amiento Individual</p>
                    <p class="path-desc">Si necesitas claridad inmediata, orden interno o tomar decisiones importantes ahora mismo.</p>
                    <a href="1a1.html" class="path-link">VER PROCESOS ‚Üí</a>
                </div>
            </div>
        </div>
    </section>

    <!-- MENSAJE FINAL -->
    <section style="padding: 60px 0; text-align: center;">
        <div class="container reveal">
            <p style="color: #666; font-size: 0.9rem; max-width: 600px; margin: 0 auto;">
                "Nada de lo que encuentres aqu√≠ funcionar√° si sigues esperando que algo externo te salve. La responsabilidad empieza cuando decides usar lo que tienes."
            </p>
        </div>
    </section>

    <!-- FOOTER -->
    <section class="final-section">
        <div class="container final-grid reveal">
            <!-- SOCIALES -->
            <div>
                <h4 class="social-title">¬øQUIERES CONOCER M√ÅS DE M√ç?</h4>
                <div class="social-icons-row">
                    <a href="https://www.instagram.com/donicolasosorio?igsh=MWY2and1cHJyMTJ3Yw%3D%3D&utm_source=qr" target="_blank" class="social-box">
                        <svg viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
                    </a>
                    
                    <a href="https://youtube.com/@donicolasosorio?si=M-escEHUxzF5gfIL" target="_blank" class="social-box">
                        <svg viewBox="0 0 24 24"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/></svg>
                    </a>
                </div>
            </div>
            
            <div class="container footer-legal">
                <p style="font-size: 0.9rem; color: #555;">¬© 2026 Responsabilidad Creadora. Todos los derechos reservados.</p>
                <p class="legal-text">
                    No promovemos resultados. No vendemos milagros, vendemos responsabilidad, claridad y estructura.
                </p>
            </div>
        </div>
    </section>

    <!-- MODAL LEAD MAGNET -->
    <div class="modal-overlay" id="leadModal">
        <div class="modal-box">
            <span class="close-modal" onclick="closeModal()">√ó</span>
            <h3 class="modal-title">ACCEDER AL RECURSO</h3>
            <p class="modal-subtitle">D√©jame tus datos para enviarte el material.</p>
            <form id="leadForm">
                <div class="form-group"><input type="text" id="name" class="form-input" placeholder="Tu Nombre" required></div>
                <div class="form-group"><input type="email" id="email" class="form-input" placeholder="Tu Email" required></div>
                <div class="form-group"><input type="tel" id="phone" class="form-input" placeholder="Tu Tel√©fono (WhatsApp)" required></div>
                <button type="submit" class="btn-submit">DESCARGAR AHORA</button>
                <p class="legal-check">Al descargar aceptas unirte a la newsletter de Responsabilidad Creadora. Cero spam.</p>
            </form>
        </div>
    </div>

    <!-- LOGICA JS -->
    <script>
        // 1. SUPABASE CLIENT
        const supabaseUrl = 'https://ticqgdblrszfcqpnmxsd.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRpY3FnZGJscnN6ZmNxcG5teHNkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAyMjc5OTcsImV4cCI6MjA4NTgwMzk5N30.T5ihawTnt1FN0nLnIXj_96FO8oE26hxVbPCcf9K-W-o';
        
        let supabaseClient;
        try {
            if (typeof supabase !== 'undefined') {
                supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);
            }
        } catch (error) {
            console.error("Error al iniciar Supabase:", error);
        }

        let currentResourceLink = '';

        // 2. CARGAR RECURSOS Y PREVIEWS
        async function loadResources() {
            const container = document.getElementById('resources-container');
            
            if (!supabaseClient) {
                container.innerHTML = '<p class="loading-text">Error conectando con la base de datos.</p>';
                return;
            }

            const { data, error } = await supabaseClient
                .from('recursos')
                .select('*')
                .order('created_at', { ascending: false });

            if (error) {
                console.error("Error cargando recursos:", error);
                container.innerHTML = '<p class="loading-text">No hay recursos disponibles.</p>';
                return;
            }

            container.innerHTML = '';

            if (data.length === 0) {
                container.innerHTML = '<p class="loading-text">A√∫n no hay recursos subidos. Vuelve pronto.</p>';
                return;
            }

            for (const resource of data) {
                const card = document.createElement('div');
                card.className = 'lib-card';
                
                const canvasId = `pdf-render-${resource.id}`;
                let previewHTML = '';
                
                if (resource.imagen_url) {
                    previewHTML = `<img src="${resource.imagen_url}" alt="${resource.titulo}">`;
                } else {
                    previewHTML = `<canvas id="${canvasId}"></canvas>`;
                    generatePdfThumbnail(resource.archivo_url, canvasId);
                }

                card.innerHTML = `
                    <div class="lib-preview">
                        ${previewHTML}
                    </div>
                    <div class="lib-content">
                        <h3 class="lib-title">${resource.titulo}</h3>
                        <p class="lib-desc">${resource.descripcion}</p>
                        <button class="btn-lib" onclick="openModal('${resource.titulo}', '${resource.archivo_url}')">
                            DESCARGAR PDF <span>‚Üì</span>
                        </button>
                    </div>
                `;
                container.appendChild(card);
            }
        }

        // 3. GENERADOR DE MINIATURAS PDF
        async function generatePdfThumbnail(pdfUrl, canvasId) {
            try {
                const loadingTask = pdfjsLib.getDocument(pdfUrl);
                const pdf = await loadingTask.promise;
                const page = await pdf.getPage(1);
                const canvas = document.getElementById(canvasId);
                if (!canvas) return;
                
                const context = canvas.getContext('2d');
                const viewport = page.getViewport({ scale: 1 });
                const desiredWidth = 600;
                const scale = desiredWidth / viewport.width;
                const scaledViewport = page.getViewport({ scale: scale });

                canvas.height = scaledViewport.height;
                canvas.width = scaledViewport.width;

                const renderContext = {
                    canvasContext: context,
                    viewport: scaledViewport
                };
                await page.render(renderContext).promise;

            } catch (error) {
                console.error("Error generando preview PDF:", error);
                const canvas = document.getElementById(canvasId);
                if(canvas) {
                    canvas.parentNode.innerHTML = '<div class="doc-placeholder" style="width:80px;height:110px;background:#333;opacity:0.5;"></div>';
                }
            }
        }

        // 4. MODALES
        function openModal(resourceName, link) {
            currentResourceLink = link;
            document.getElementById('leadModal').classList.add('active');
            document.getElementById('leadForm').dataset.resource = resourceName;
        }

        function closeModal() {
            document.getElementById('leadModal').classList.remove('active');
        }

        document.getElementById('leadForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = document.querySelector('.btn-submit');
            btn.textContent = "Procesando...";
            btn.disabled = true;

            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const resource = e.target.dataset.resource;

            try {
                if (supabaseClient) {
                    await supabaseClient.from('leads').insert([{ nombre: name, email: email, telefono: phone, recurso: resource }]);
                }
                window.location.href = currentResourceLink; 
                closeModal();
                btn.textContent = "DESCARGAR AHORA";
                btn.disabled = false;
                e.target.reset();
            } catch (error) {
                console.error(error);
                window.location.href = currentResourceLink; 
                closeModal();
                btn.textContent = "DESCARGAR AHORA";
                btn.disabled = false;
            }
        });

        // 5. INICIALIZAR
        document.addEventListener('DOMContentLoaded', () => {
            loadResources(); 
            const reveals = document.querySelectorAll('.reveal');
            const revealOnScroll = () => {
                const windowHeight = window.innerHeight;
                const elementVisible = 100;
                reveals.forEach((reveal) => {
                    const elementTop = reveal.getBoundingClientRect().top;
                    if (elementTop < windowHeight - elementVisible) reveal.classList.add('active');
                });
            };
            window.addEventListener('scroll', revealOnScroll);
            revealOnScroll();
        });

        /* Men√∫ M√≥vil */
        function toggleMenu() {
            const menu = document.getElementById('navMenu');
            menu.classList.toggle('active');
        }

        function toggleDropdown(element) {
            if (window.innerWidth <= 900) {
                element.classList.toggle('active');
            }
        }
    </script>
</body>
</html>